<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24con2tag_3EnXEuJ4aNF5Ism4qi6lAA"></span><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MagicHash #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE StrictData #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">FoundationDB.Layer.Tuple.Internal</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NFData</span></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">throw</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State.Strict</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Array.Unboxed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Array</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Array.Unboxed</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bits</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Serialize.Get</span></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Get</span></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-identifier">getByteString</span></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><span class="hs-identifier">getBytes</span></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-identifier">getWord16be</span></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><span class="hs-identifier">getWord32be</span></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><span class="hs-identifier">getWord64be</span></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="hs-identifier">getWord8</span></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><span class="hs-identifier">lookAhead</span></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-identifier">remaining</span></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-identifier">runGet</span></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><span class="hs-identifier">runGetState</span></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Serialize.IEEE754</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getFloat32be</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getFloat64be</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Serialize.IEEE754</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Put</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Serialize.Put</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Put</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decodeUtf8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">encodeUtf8</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Tuple</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">swap</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Word16</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Word32</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Word64</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Word8</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="FoundationDB.Error.Internal.html"><span class="hs-identifier">FoundationDB.Error.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Error.Internal.html#Error"><span class="hs-identifier">Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Error.Internal.html#Error"><span class="hs-identifier">Error</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Error.Internal.html#FDBHsError"><span class="hs-identifier">FDBHsError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Error.Internal.html#TupleIntTooLarge"><span class="hs-identifier">TupleIntTooLarge</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="FoundationDB.Versionstamp.html"><span class="hs-identifier">FoundationDB.Versionstamp</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Versionstamp.Internal.html#decodeVersionstamp"><span class="hs-identifier">decodeVersionstamp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Exts</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">I#</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Integer.Logarithms</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">integerLog2#</span></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-comment">-- | Elements of tuples. A tuple is represented as a list of these. Note that</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- a tuple may contain at most one incomplete version stamp. Future versions of</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- this library may introduce a more strongly typed tuple representation that</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- enforces this restriction.</span><span>
</span><span id="line-55"></span><span id="local-6989586621679272718"><span id="local-6989586621679272719"></span></span><span class="hs-keyword">data</span><span> </span><span id="Elem"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-var">Elem</span></a></span></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Corresponds to null or nil types in other language bindings.</span><span>
</span><span id="line-57"></span><span>    </span><span id="None"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#None"><span class="hs-identifier hs-var">None</span></a></span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Nested tuples.</span><span>
</span><span id="line-59"></span><span>    </span><span id="Tuple"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Tuple"><span class="hs-identifier hs-var">Tuple</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Bytes"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Bytes"><span class="hs-identifier hs-var">Bytes</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Text"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Variable-length integer encodings. For values that fit within a 64-bit</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-comment">-- signed integer, the &lt;https://github.com/apple/foundationdb/blob/master/design/tuple.md#integer standard integer&gt;</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-comment">-- encoding is used. For larger values, the &lt;https://github.com/apple/foundationdb/blob/master/design/tuple.md#positive-arbitrary-precision-integer provisional spec&gt;</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-comment">-- for Java and Python values is used.</span><span>
</span><span id="line-66"></span><span>    </span><span id="Int"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Int"><span class="hs-identifier hs-var">Int</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Float"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Float"><span class="hs-identifier hs-var">Float</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Float</span></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Double"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Double"><span class="hs-identifier hs-var">Double</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Bool"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Crude UUID to avoid dependency on UUID library. Interconvertible with</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-comment">-- @toWords@ and @fromWords@ in 'Data.UUID'.</span><span>
</span><span id="line-72"></span><span>    </span><span id="UUID"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#UUID"><span class="hs-identifier hs-var">UUID</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CompleteVS"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#CompleteVS"><span class="hs-identifier hs-var">CompleteVS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Versionstamp.Internal.html#Versionstamp"><span class="hs-identifier hs-type">Versionstamp</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="FoundationDB.Versionstamp.Internal.html#Complete"><span class="hs-identifier hs-type">Complete</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | This constructor is to be used in conjunction with 'encodeTupleElems' and</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-comment">-- the 'setVersionstampedKey' atomic operation. See 'encodeTupleElems' for</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-comment">-- more information.</span><span>
</span><span id="line-77"></span><span>    </span><span id="IncompleteVS"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#IncompleteVS"><span class="hs-identifier hs-var">IncompleteVS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Versionstamp.Internal.html#Versionstamp"><span class="hs-identifier hs-type">Versionstamp</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="FoundationDB.Versionstamp.Internal.html#Incomplete"><span class="hs-identifier hs-type">Incomplete</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679272701"><span id="local-6989586621679272703"><span id="local-6989586621679272705"><span class="annot"><span class="annottext">Int -&gt; Elem -&gt; ShowS
[Elem] -&gt; ShowS
Elem -&gt; String
(Int -&gt; Elem -&gt; ShowS)
-&gt; (Elem -&gt; String) -&gt; ([Elem] -&gt; ShowS) -&gt; Show Elem
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Elem] -&gt; ShowS
$cshowList :: [Elem] -&gt; ShowS
show :: Elem -&gt; String
$cshow :: Elem -&gt; String
showsPrec :: Int -&gt; Elem -&gt; ShowS
$cshowsPrec :: Int -&gt; Elem -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679272696"><span id="local-6989586621679272698"><span class="annot"><span class="annottext">Elem -&gt; Elem -&gt; Bool
(Elem -&gt; Elem -&gt; Bool) -&gt; (Elem -&gt; Elem -&gt; Bool) -&gt; Eq Elem
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Elem -&gt; Elem -&gt; Bool
$c/= :: Elem -&gt; Elem -&gt; Bool
== :: Elem -&gt; Elem -&gt; Bool
$c== :: Elem -&gt; Elem -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679272680"><span id="local-6989586621679272682"><span id="local-6989586621679272684"><span id="local-6989586621679272686"><span id="local-6989586621679272688"><span id="local-6989586621679272690"><span id="local-6989586621679272692"><span class="annot"><span class="annottext">Eq Elem
Eq Elem
-&gt; (Elem -&gt; Elem -&gt; Ordering)
-&gt; (Elem -&gt; Elem -&gt; Bool)
-&gt; (Elem -&gt; Elem -&gt; Bool)
-&gt; (Elem -&gt; Elem -&gt; Bool)
-&gt; (Elem -&gt; Elem -&gt; Bool)
-&gt; (Elem -&gt; Elem -&gt; Elem)
-&gt; (Elem -&gt; Elem -&gt; Elem)
-&gt; Ord Elem
Elem -&gt; Elem -&gt; Bool
Elem -&gt; Elem -&gt; Ordering
Elem -&gt; Elem -&gt; Elem
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Elem -&gt; Elem -&gt; Elem
$cmin :: Elem -&gt; Elem -&gt; Elem
max :: Elem -&gt; Elem -&gt; Elem
$cmax :: Elem -&gt; Elem -&gt; Elem
&gt;= :: Elem -&gt; Elem -&gt; Bool
$c&gt;= :: Elem -&gt; Elem -&gt; Bool
&gt; :: Elem -&gt; Elem -&gt; Bool
$c&gt; :: Elem -&gt; Elem -&gt; Bool
&lt;= :: Elem -&gt; Elem -&gt; Bool
$c&lt;= :: Elem -&gt; Elem -&gt; Bool
&lt; :: Elem -&gt; Elem -&gt; Bool
$c&lt; :: Elem -&gt; Elem -&gt; Bool
compare :: Elem -&gt; Elem -&gt; Ordering
$ccompare :: Elem -&gt; Elem -&gt; Ordering
$cp1Ord :: Eq Elem
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. Elem -&gt; Rep Elem x)
-&gt; (forall x. Rep Elem x -&gt; Elem) -&gt; Generic Elem
forall x. Rep Elem x -&gt; Elem
forall x. Elem -&gt; Rep Elem x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Elem x -&gt; Elem
$cfrom :: forall x. Elem -&gt; Rep Elem x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679272674"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-type">sizeLimits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Array</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-83"></span><span id="sizeLimits"><span class="annot"><span class="annottext">sizeLimits :: Array Int Integer
</span><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-var hs-var">sizeLimits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; [Integer] -&gt; Array Int Integer
forall (a :: * -&gt; * -&gt; *) e i.
(IArray a e, Ix i) =&gt;
(i, i) -&gt; [e] -&gt; a i e
</span><span class="hs-identifier hs-var">A.listArray</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">shiftL</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272669"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679272669"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272669"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-comment">-- | Returns smallest size limit greater than input.</span><span>
</span><span id="line-86"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#bisectSize"><span class="hs-identifier hs-type">bisectSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-87"></span><span id="bisectSize"><span class="annot"><span class="annottext">bisectSize :: Integer -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bisectSize"><span class="hs-identifier hs-var hs-var">bisectSize</span></a></span></span><span> </span><span id="local-6989586621679272666"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272666"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621679272665"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-89"></span><span>    </span><span id="local-6989586621679272665"><span class="annot"><span class="annottext">go :: Int -&gt; Int
</span><a href="#local-6989586621679272665"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><a href="#local-6989586621679272665"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679272664"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272664"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272666"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array Int Integer
</span><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-var">sizeLimits</span></a></span><span> </span><span class="annot"><span class="annottext">Array Int Integer -&gt; Int -&gt; Integer
forall (a :: * -&gt; * -&gt; *) e i.
(IArray a e, Ix i) =&gt;
a i e -&gt; i -&gt; e
</span><span class="hs-operator hs-var">A.!</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272664"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272664"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621679272665"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272664"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-comment">-- | Returns the minimum number of bits needed to encode the given int.</span><span>
</span><span id="line-93"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#bitLen"><span class="hs-identifier hs-type">bitLen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-94"></span><span id="bitLen"><span class="annot"><span class="annottext">bitLen :: Integer -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bitLen"><span class="hs-identifier hs-var hs-var">bitLen</span></a></span></span><span> </span><span id="local-6989586621679272659"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272659"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int# -&gt; Int
</span><span class="hs-identifier hs-var">I#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int#
</span><span class="hs-identifier hs-var">integerLog2#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">abs</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272659"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-comment">-- | Returns the minimum number of bytes needed to encode the given int.</span><span>
</span><span id="line-97"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#byteLen"><span class="hs-identifier hs-type">byteLen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-98"></span><span id="byteLen"><span class="annot"><span class="annottext">byteLen :: Integer -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#byteLen"><span class="hs-identifier hs-var hs-var">byteLen</span></a></span></span><span> </span><span id="local-6989586621679272656"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272656"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bitLen"><span class="hs-identifier hs-var">bitLen</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272656"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`div`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#nullCode"><span class="hs-identifier hs-type">nullCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#bytesCode"><span class="hs-identifier hs-type">bytesCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#stringCode"><span class="hs-identifier hs-type">stringCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#nestedCode"><span class="hs-identifier hs-type">nestedCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-101"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#zeroCode"><span class="hs-identifier hs-type">zeroCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#posEndCode"><span class="hs-identifier hs-type">posEndCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#negStartCode"><span class="hs-identifier hs-type">negStartCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#floatCode"><span class="hs-identifier hs-type">floatCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-102"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#doubleCode"><span class="hs-identifier hs-type">doubleCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#falseCode"><span class="hs-identifier hs-type">falseCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#trueCode"><span class="hs-identifier hs-type">trueCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#uuidCode"><span class="hs-identifier hs-type">uuidCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#versionstampCode"><span class="hs-identifier hs-type">versionstampCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-103"></span><span id="nullCode"><span class="annot"><span class="annottext">nullCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#nullCode"><span class="hs-identifier hs-var hs-var">nullCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span>
</span><span id="line-104"></span><span id="bytesCode"><span class="annot"><span class="annottext">bytesCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bytesCode"><span class="hs-identifier hs-var hs-var">bytesCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x01</span></span><span>
</span><span id="line-105"></span><span id="stringCode"><span class="annot"><span class="annottext">stringCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#stringCode"><span class="hs-identifier hs-var hs-var">stringCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x02</span></span><span>
</span><span id="line-106"></span><span id="nestedCode"><span class="annot"><span class="annottext">nestedCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#nestedCode"><span class="hs-identifier hs-var hs-var">nestedCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x05</span></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span id="negStartCode"><span class="annot"><span class="annottext">negStartCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#negStartCode"><span class="hs-identifier hs-var hs-var">negStartCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x0b</span></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span id="zeroCode"><span class="annot"><span class="annottext">zeroCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#zeroCode"><span class="hs-identifier hs-var hs-var">zeroCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x14</span></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="posEndCode"><span class="annot"><span class="annottext">posEndCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#posEndCode"><span class="hs-identifier hs-var hs-var">posEndCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x1d</span></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span id="floatCode"><span class="annot"><span class="annottext">floatCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#floatCode"><span class="hs-identifier hs-var hs-var">floatCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x20</span></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="doubleCode"><span class="annot"><span class="annottext">doubleCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#doubleCode"><span class="hs-identifier hs-var hs-var">doubleCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x21</span></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span id="falseCode"><span class="annot"><span class="annottext">falseCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#falseCode"><span class="hs-identifier hs-var hs-var">falseCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x26</span></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span id="trueCode"><span class="annot"><span class="annottext">trueCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#trueCode"><span class="hs-identifier hs-var hs-var">trueCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x27</span></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span id="uuidCode"><span class="annot"><span class="annottext">uuidCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#uuidCode"><span class="hs-identifier hs-var hs-var">uuidCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x30</span></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span id="versionstampCode"><span class="annot"><span class="annottext">versionstampCode :: Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#versionstampCode"><span class="hs-identifier hs-var hs-var">versionstampCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x33</span></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">data</span><span> </span><span id="SerializationState"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#SerializationState"><span class="hs-identifier hs-var">SerializationState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SerializationState"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#SerializationState"><span class="hs-identifier hs-var">SerializationState</span></a></span></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="currLength"><span class="annot"><span class="annottext">SerializationState -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#currLength"><span class="hs-identifier hs-var hs-var">currLength</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>    </span><span id="incompleteVersionstampPos"><span class="annot"><span class="annottext">SerializationState -&gt; Maybe Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incompleteVersionstampPos"><span class="hs-identifier hs-var hs-var">incompleteVersionstampPos</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679272633"><span id="local-6989586621679272635"><span id="local-6989586621679272637"><span class="annot"><span class="annottext">Int -&gt; SerializationState -&gt; ShowS
[SerializationState] -&gt; ShowS
SerializationState -&gt; String
(Int -&gt; SerializationState -&gt; ShowS)
-&gt; (SerializationState -&gt; String)
-&gt; ([SerializationState] -&gt; ShowS)
-&gt; Show SerializationState
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SerializationState] -&gt; ShowS
$cshowList :: [SerializationState] -&gt; ShowS
show :: SerializationState -&gt; String
$cshow :: SerializationState -&gt; String
showsPrec :: Int -&gt; SerializationState -&gt; ShowS
$cshowsPrec :: Int -&gt; SerializationState -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679272629"><span id="local-6989586621679272631"><span class="annot"><span class="annottext">SerializationState -&gt; SerializationState -&gt; Bool
(SerializationState -&gt; SerializationState -&gt; Bool)
-&gt; (SerializationState -&gt; SerializationState -&gt; Bool)
-&gt; Eq SerializationState
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SerializationState -&gt; SerializationState -&gt; Bool
$c/= :: SerializationState -&gt; SerializationState -&gt; Bool
== :: SerializationState -&gt; SerializationState -&gt; Bool
$c== :: SerializationState -&gt; SerializationState -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679272614"><span id="local-6989586621679272616"><span id="local-6989586621679272618"><span id="local-6989586621679272620"><span id="local-6989586621679272622"><span id="local-6989586621679272624"><span id="local-6989586621679272626"><span class="annot"><span class="annottext">Eq SerializationState
Eq SerializationState
-&gt; (SerializationState -&gt; SerializationState -&gt; Ordering)
-&gt; (SerializationState -&gt; SerializationState -&gt; Bool)
-&gt; (SerializationState -&gt; SerializationState -&gt; Bool)
-&gt; (SerializationState -&gt; SerializationState -&gt; Bool)
-&gt; (SerializationState -&gt; SerializationState -&gt; Bool)
-&gt; (SerializationState -&gt; SerializationState -&gt; SerializationState)
-&gt; (SerializationState -&gt; SerializationState -&gt; SerializationState)
-&gt; Ord SerializationState
SerializationState -&gt; SerializationState -&gt; Bool
SerializationState -&gt; SerializationState -&gt; Ordering
SerializationState -&gt; SerializationState -&gt; SerializationState
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: SerializationState -&gt; SerializationState -&gt; SerializationState
$cmin :: SerializationState -&gt; SerializationState -&gt; SerializationState
max :: SerializationState -&gt; SerializationState -&gt; SerializationState
$cmax :: SerializationState -&gt; SerializationState -&gt; SerializationState
&gt;= :: SerializationState -&gt; SerializationState -&gt; Bool
$c&gt;= :: SerializationState -&gt; SerializationState -&gt; Bool
&gt; :: SerializationState -&gt; SerializationState -&gt; Bool
$c&gt; :: SerializationState -&gt; SerializationState -&gt; Bool
&lt;= :: SerializationState -&gt; SerializationState -&gt; Bool
$c&lt;= :: SerializationState -&gt; SerializationState -&gt; Bool
&lt; :: SerializationState -&gt; SerializationState -&gt; Bool
$c&lt; :: SerializationState -&gt; SerializationState -&gt; Bool
compare :: SerializationState -&gt; SerializationState -&gt; Ordering
$ccompare :: SerializationState -&gt; SerializationState -&gt; Ordering
$cp1Ord :: Eq SerializationState
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">newtype</span><span> </span><span id="PutTuple"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-var">PutTuple</span></a></span></span><span> </span><span id="local-6989586621679272808"><span class="annot"><a href="#local-6989586621679272808"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PutTuple"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-var">PutTuple</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unPutTuple"><span class="annot"><span class="annottext">PutTuple a -&gt; StateT SerializationState PutM a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#unPutTuple"><span class="hs-identifier hs-var hs-var">unPutTuple</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#SerializationState"><span class="hs-identifier hs-type">SerializationState</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Put.PutM</span></span><span> </span><span class="annot"><a href="#local-6989586621679272808"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679272608"><span id="local-6989586621679272610"><span class="annot"><span class="annottext">a -&gt; PutTuple b -&gt; PutTuple a
(a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b
(forall a b. (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b)
-&gt; (forall a b. a -&gt; PutTuple b -&gt; PutTuple a) -&gt; Functor PutTuple
forall a b. a -&gt; PutTuple b -&gt; PutTuple a
forall a b. (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; PutTuple b -&gt; PutTuple a
$c&lt;$ :: forall a b. a -&gt; PutTuple b -&gt; PutTuple a
fmap :: (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b
$cfmap :: forall a b. (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679272596"><span id="local-6989586621679272598"><span id="local-6989586621679272600"><span id="local-6989586621679272602"><span id="local-6989586621679272604"><span class="annot"><span class="annottext">Functor PutTuple
a -&gt; PutTuple a
Functor PutTuple
-&gt; (forall a. a -&gt; PutTuple a)
-&gt; (forall a b. PutTuple (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; PutTuple a -&gt; PutTuple b -&gt; PutTuple c)
-&gt; (forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple b)
-&gt; (forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple a)
-&gt; Applicative PutTuple
PutTuple a -&gt; PutTuple b -&gt; PutTuple b
PutTuple a -&gt; PutTuple b -&gt; PutTuple a
PutTuple (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b
(a -&gt; b -&gt; c) -&gt; PutTuple a -&gt; PutTuple b -&gt; PutTuple c
forall a. a -&gt; PutTuple a
forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple a
forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple b
forall a b. PutTuple (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b
forall a b c.
(a -&gt; b -&gt; c) -&gt; PutTuple a -&gt; PutTuple b -&gt; PutTuple c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: PutTuple a -&gt; PutTuple b -&gt; PutTuple a
$c&lt;* :: forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple a
*&gt; :: PutTuple a -&gt; PutTuple b -&gt; PutTuple b
$c*&gt; :: forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple b
liftA2 :: (a -&gt; b -&gt; c) -&gt; PutTuple a -&gt; PutTuple b -&gt; PutTuple c
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; PutTuple a -&gt; PutTuple b -&gt; PutTuple c
&lt;*&gt; :: PutTuple (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b
$c&lt;*&gt; :: forall a b. PutTuple (a -&gt; b) -&gt; PutTuple a -&gt; PutTuple b
pure :: a -&gt; PutTuple a
$cpure :: forall a. a -&gt; PutTuple a
$cp1Applicative :: Functor PutTuple
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679272588"><span id="local-6989586621679272590"><span id="local-6989586621679272592"><span class="annot"><span class="annottext">Applicative PutTuple
a -&gt; PutTuple a
Applicative PutTuple
-&gt; (forall a b. PutTuple a -&gt; (a -&gt; PutTuple b) -&gt; PutTuple b)
-&gt; (forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple b)
-&gt; (forall a. a -&gt; PutTuple a)
-&gt; Monad PutTuple
PutTuple a -&gt; (a -&gt; PutTuple b) -&gt; PutTuple b
PutTuple a -&gt; PutTuple b -&gt; PutTuple b
forall a. a -&gt; PutTuple a
forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple b
forall a b. PutTuple a -&gt; (a -&gt; PutTuple b) -&gt; PutTuple b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; PutTuple a
$creturn :: forall a. a -&gt; PutTuple a
&gt;&gt; :: PutTuple a -&gt; PutTuple b -&gt; PutTuple b
$c&gt;&gt; :: forall a b. PutTuple a -&gt; PutTuple b -&gt; PutTuple b
&gt;&gt;= :: PutTuple a -&gt; (a -&gt; PutTuple b) -&gt; PutTuple b
$c&gt;&gt;= :: forall a b. PutTuple a -&gt; (a -&gt; PutTuple b) -&gt; PutTuple b
$cp1Monad :: Applicative PutTuple
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span id="local-6989586621679272580"><span id="local-6989586621679272582"><span id="local-6989586621679272584"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#SerializationState"><span class="hs-identifier hs-type">SerializationState</span></a></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span></span></span></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | returns the serialized tuple and the position of the incomplete version</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- stamp, if any.</span><span>
</span><span id="line-139"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#runPutTuple"><span class="hs-identifier hs-type">runPutTuple</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span id="runPutTuple"><span class="annot"><span class="annottext">runPutTuple :: PutTuple () -&gt; (ByteString, Maybe Int)
</span><a href="FoundationDB.Layer.Tuple.Internal.html#runPutTuple"><span class="hs-identifier hs-var hs-var">runPutTuple</span></a></span></span><span> </span><span id="local-6989586621679272577"><span class="annot"><span class="annottext">PutTuple ()
</span><a href="#local-6989586621679272577"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe Int, ByteString) -&gt; (ByteString, Maybe Int)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span> </span><span class="annot"><span class="annottext">((Maybe Int, ByteString) -&gt; (ByteString, Maybe Int))
-&gt; (Maybe Int, ByteString) -&gt; (ByteString, Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-141"></span><span>  </span><span class="annot"><span class="annottext">PutM (Maybe Int) -&gt; (Maybe Int, ByteString)
forall a. PutM a -&gt; (a, ByteString)
</span><span class="hs-identifier hs-var">Put.runPutM</span></span><span> </span><span class="annot"><span class="annottext">(PutM (Maybe Int) -&gt; (Maybe Int, ByteString))
-&gt; PutM (Maybe Int) -&gt; (Maybe Int, ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679272575"><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272575"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT SerializationState PutM ()
-&gt; SerializationState -&gt; PutM ((), SerializationState)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PutTuple () -&gt; StateT SerializationState PutM ()
forall a. PutTuple a -&gt; StateT SerializationState PutM a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#unPutTuple"><span class="hs-identifier hs-var hs-var">unPutTuple</span></a></span><span> </span><span class="annot"><span class="annottext">PutTuple ()
</span><a href="#local-6989586621679272577"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; SerializationState
</span><a href="FoundationDB.Layer.Tuple.Internal.html#SerializationState"><span class="hs-identifier hs-var">SerializationState</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int -&gt; (Int -&gt; PutM ()) -&gt; PutM ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SerializationState -&gt; Maybe Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incompleteVersionstampPos"><span class="hs-identifier hs-var hs-var">incompleteVersionstampPos</span></a></span><span> </span><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272575"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Int -&gt; PutM ()) -&gt; PutM ()) -&gt; (Int -&gt; PutM ()) -&gt; PutM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679272572"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272572"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Putter Word32
</span><span class="hs-identifier hs-var">Put.putWord32le</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272572"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int -&gt; PutM (Maybe Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SerializationState -&gt; Maybe Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incompleteVersionstampPos"><span class="hs-identifier hs-var hs-var">incompleteVersionstampPos</span></a></span><span> </span><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272575"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#incrLength"><span class="hs-identifier hs-type">incrLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span id="incrLength"><span class="annot"><span class="annottext">incrLength :: Int -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incrLength"><span class="hs-identifier hs-var hs-var">incrLength</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679272569"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272569"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-148"></span><span>  </span><span id="local-6989586621679272568"><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272568"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PutTuple SerializationState
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-149"></span><span>  </span><span class="annot"><span class="annottext">SerializationState -&gt; PutTuple ()
forall s (m :: * -&gt; *). MonadState s m =&gt; s -&gt; m ()
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272568"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">currLength :: Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#currLength"><span class="hs-identifier hs-var">currLength</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SerializationState -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#currLength"><span class="hs-identifier hs-var hs-var">currLength</span></a></span><span> </span><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272568"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272569"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span id="local-6989586621679272794"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#liftPutM"><span class="hs-identifier hs-type">liftPutM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Put.PutM</span></span><span> </span><span class="annot"><a href="#local-6989586621679272794"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679272794"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-152"></span><span id="liftPutM"><span class="annot"><span class="annottext">liftPutM :: PutM a -&gt; PutTuple a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#liftPutM"><span class="hs-identifier hs-var hs-var">liftPutM</span></a></span></span><span> </span><span id="local-6989586621679272564"><span class="annot"><span class="annottext">PutM a
</span><a href="#local-6989586621679272564"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StateT SerializationState PutM a -&gt; PutTuple a
forall a. StateT SerializationState PutM a -&gt; PutTuple a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-var">PutTuple</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT SerializationState PutM a -&gt; PutTuple a)
-&gt; StateT SerializationState PutM a -&gt; PutTuple a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PutM a -&gt; StateT SerializationState PutM a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">PutM a
</span><a href="#local-6989586621679272564"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-type">putWord8</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span id="putWord8"><span class="annot"><span class="annottext">putWord8 :: Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var hs-var">putWord8</span></a></span></span><span> </span><span id="local-6989586621679272561"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272561"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><span class="annottext">PutM () -&gt; PutTuple ()
forall a. PutM a -&gt; PutTuple a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#liftPutM"><span class="hs-identifier hs-var">liftPutM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Putter Word8
</span><span class="hs-identifier hs-var">Put.putWord8</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272561"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incrLength"><span class="hs-identifier hs-var">incrLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#putWord16be"><span class="hs-identifier hs-type">putWord16be</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span id="putWord16be"><span class="annot"><span class="annottext">putWord16be :: Word16 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord16be"><span class="hs-identifier hs-var hs-var">putWord16be</span></a></span></span><span> </span><span id="local-6989586621679272558"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272558"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><span class="annottext">PutM () -&gt; PutTuple ()
forall a. PutM a -&gt; PutTuple a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#liftPutM"><span class="hs-identifier hs-var">liftPutM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Putter Word16
</span><span class="hs-identifier hs-var">Put.putWord16be</span></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272558"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incrLength"><span class="hs-identifier hs-var">incrLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#putWord32be"><span class="hs-identifier hs-type">putWord32be</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span id="putWord32be"><span class="annot"><span class="annottext">putWord32be :: Word32 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord32be"><span class="hs-identifier hs-var hs-var">putWord32be</span></a></span></span><span> </span><span id="local-6989586621679272555"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272555"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><span class="annottext">PutM () -&gt; PutTuple ()
forall a. PutM a -&gt; PutTuple a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#liftPutM"><span class="hs-identifier hs-var">liftPutM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Putter Word32
</span><span class="hs-identifier hs-var">Put.putWord32be</span></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272555"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incrLength"><span class="hs-identifier hs-var">incrLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#putWord64be"><span class="hs-identifier hs-type">putWord64be</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span id="putWord64be"><span class="annot"><span class="annottext">putWord64be :: Word64 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord64be"><span class="hs-identifier hs-var hs-var">putWord64be</span></a></span></span><span> </span><span id="local-6989586621679272552"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272552"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><span class="annottext">PutM () -&gt; PutTuple ()
forall a. PutM a -&gt; PutTuple a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#liftPutM"><span class="hs-identifier hs-var">liftPutM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Putter Word64
</span><span class="hs-identifier hs-var">Put.putWord64be</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272552"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incrLength"><span class="hs-identifier hs-var">incrLength</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#putByteString"><span class="hs-identifier hs-type">putByteString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span id="putByteString"><span class="annot"><span class="annottext">putByteString :: ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putByteString"><span class="hs-identifier hs-var hs-var">putByteString</span></a></span></span><span> </span><span id="local-6989586621679272549"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272549"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><span class="annottext">PutM () -&gt; PutTuple ()
forall a. PutM a -&gt; PutTuple a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#liftPutM"><span class="hs-identifier hs-var">liftPutM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Putter ByteString
</span><span class="hs-identifier hs-var">Put.putByteString</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272549"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incrLength"><span class="hs-identifier hs-var">incrLength</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272549"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeBytes"><span class="hs-identifier hs-type">encodeBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span id="encodeBytes"><span class="annot"><span class="annottext">encodeBytes :: ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeBytes"><span class="hs-identifier hs-var hs-var">encodeBytes</span></a></span></span><span> </span><span id="local-6989586621679272545"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272545"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; PutTuple ()) -&gt; [Word8] -&gt; PutTuple ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="#local-6989586621679272543"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; [Word8]
</span><span class="hs-identifier hs-var">BS.unpack</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272545"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PutTuple () -&gt; PutTuple () -&gt; PutTuple ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-182"></span><span>    </span><span id="local-6989586621679272543"><span class="annot"><span class="annottext">f :: Word8 -&gt; PutTuple ()
</span><a href="#local-6989586621679272543"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span> </span><span class="annot"><span class="annottext">PutTuple () -&gt; PutTuple () -&gt; PutTuple ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><a href="#local-6989586621679272543"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621679272541"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272541"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272541"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- @truncatedInt n v@ returns the last n bytes of v, encoded big endian.</span><span>
</span><span id="line-186"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#truncatedInt"><span class="hs-identifier hs-type">truncatedInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-187"></span><span id="truncatedInt"><span class="annot"><span class="annottext">truncatedInt :: Int -&gt; Integer -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#truncatedInt"><span class="hs-identifier hs-var hs-var">truncatedInt</span></a></span></span><span> </span><span id="local-6989586621679272539"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272539"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679272538"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272538"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272539"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PutM () -&gt; ByteString
</span><span class="hs-identifier hs-var">Put.runPut</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Putter Word64
</span><span class="hs-identifier hs-var">Put.putWord64be</span></span><span> </span><span class="annot"><span class="annottext">Putter Word64 -&gt; Putter Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272538"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeLargePosInt"><span class="hs-identifier hs-type">encodeLargePosInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span id="encodeLargePosInt"><span class="annot"><span class="annottext">encodeLargePosInt :: Integer -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeLargePosInt"><span class="hs-identifier hs-var hs-var">encodeLargePosInt</span></a></span></span><span> </span><span id="local-6989586621679272534"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272534"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272533"><span class="annot"><span class="annottext">l :: Int
</span><a href="#local-6989586621679272533"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#byteLen"><span class="hs-identifier hs-var">byteLen</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272534"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; PutTuple () -&gt; PutTuple ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272533"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">255</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Error -&gt; PutTuple ()
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">throw</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FDBHsError -&gt; Error
</span><a href="FoundationDB.Error.Internal.html#Error"><span class="hs-identifier hs-var">Error</span></a></span><span> </span><span class="annot"><span class="annottext">FDBHsError
</span><a href="FoundationDB.Error.Internal.html#TupleIntTooLarge"><span class="hs-identifier hs-var">TupleIntTooLarge</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272533"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="annottext">[Int] -&gt; (Int -&gt; PutTuple ()) -&gt; PutTuple ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272533"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272533"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">((Int -&gt; PutTuple ()) -&gt; PutTuple ())
-&gt; (Int -&gt; PutTuple ()) -&gt; PutTuple ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679272530"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272530"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272534"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`shiftR`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272530"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeLargeNegInt"><span class="hs-identifier hs-type">encodeLargeNegInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span id="encodeLargeNegInt"><span class="annot"><span class="annottext">encodeLargeNegInt :: Integer -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeLargeNegInt"><span class="hs-identifier hs-var hs-var">encodeLargeNegInt</span></a></span></span><span> </span><span id="local-6989586621679272527"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272527"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272526"><span class="annot"><span class="annottext">l :: Int
</span><a href="#local-6989586621679272526"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#byteLen"><span class="hs-identifier hs-var">byteLen</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272527"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; PutTuple () -&gt; PutTuple ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272526"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">255</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Error -&gt; PutTuple ()
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">throw</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FDBHsError -&gt; Error
</span><a href="FoundationDB.Error.Internal.html#Error"><span class="hs-identifier hs-var">Error</span></a></span><span> </span><span class="annot"><span class="annottext">FDBHsError
</span><a href="FoundationDB.Error.Internal.html#TupleIntTooLarge"><span class="hs-identifier hs-var">TupleIntTooLarge</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272525"><span class="annot"><span class="annottext">v' :: Integer
</span><a href="#local-6989586621679272525"><span class="hs-identifier hs-var hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272527"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`shiftL`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272526"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-202"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272526"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`xor`</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><span class="annottext">[Int] -&gt; (Int -&gt; PutTuple ()) -&gt; PutTuple ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272526"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272526"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">((Int -&gt; PutTuple ()) -&gt; PutTuple ())
-&gt; (Int -&gt; PutTuple ()) -&gt; PutTuple ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679272523"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272523"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272525"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`shiftR`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272523"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodePosInt"><span class="hs-identifier hs-type">encodePosInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span id="encodePosInt"><span class="annot"><span class="annottext">encodePosInt :: Integer -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodePosInt"><span class="hs-identifier hs-var hs-var">encodePosInt</span></a></span></span><span> </span><span id="local-6989586621679272521"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272521"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272521"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Array Int Integer
</span><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-var">sizeLimits</span></a></span><span> </span><span class="annot"><span class="annottext">Array Int Integer -&gt; Int -&gt; Integer
forall (a :: * -&gt; * -&gt; *) e i.
(IArray a e, Ix i) =&gt;
a i e -&gt; i -&gt; e
</span><span class="hs-operator hs-var">A.!</span></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Int
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array Int Integer -&gt; (Int, Int)
forall (a :: * -&gt; * -&gt; *) e i.
(IArray a e, Ix i) =&gt;
a i e -&gt; (i, i)
</span><span class="hs-identifier hs-var">A.bounds</span></span><span> </span><span class="annot"><span class="annottext">Array Int Integer
</span><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-var">sizeLimits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#posEndCode"><span class="hs-identifier hs-var">posEndCode</span></a></span><span> </span><span class="annot"><span class="annottext">PutTuple () -&gt; PutTuple () -&gt; PutTuple ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeLargePosInt"><span class="hs-identifier hs-var">encodeLargePosInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272521"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-211"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272519"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679272519"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bisectSize"><span class="hs-identifier hs-var">bisectSize</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272521"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-212"></span><span>      </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#zeroCode"><span class="hs-identifier hs-var">zeroCode</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272519"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>      </span><span class="annot"><span class="annottext">ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putByteString"><span class="hs-identifier hs-var">putByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; PutTuple ()) -&gt; ByteString -&gt; PutTuple ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Integer -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#truncatedInt"><span class="hs-identifier hs-var">truncatedInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272519"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272521"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeNegInt"><span class="hs-identifier hs-type">encodeNegInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span id="encodeNegInt"><span class="annot"><span class="annottext">encodeNegInt :: Integer -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeNegInt"><span class="hs-identifier hs-var hs-var">encodeNegInt</span></a></span></span><span> </span><span id="local-6989586621679272517"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272517"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">negate</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272517"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Array Int Integer
</span><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-var">sizeLimits</span></a></span><span> </span><span class="annot"><span class="annottext">Array Int Integer -&gt; Int -&gt; Integer
forall (a :: * -&gt; * -&gt; *) e i.
(IArray a e, Ix i) =&gt;
a i e -&gt; i -&gt; e
</span><span class="hs-operator hs-var">A.!</span></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Int
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array Int Integer -&gt; (Int, Int)
forall (a :: * -&gt; * -&gt; *) e i.
(IArray a e, Ix i) =&gt;
a i e -&gt; (i, i)
</span><span class="hs-identifier hs-var">A.bounds</span></span><span> </span><span class="annot"><span class="annottext">Array Int Integer
</span><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-var">sizeLimits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#negStartCode"><span class="hs-identifier hs-var">negStartCode</span></a></span><span> </span><span class="annot"><span class="annottext">PutTuple () -&gt; PutTuple () -&gt; PutTuple ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeLargeNegInt"><span class="hs-identifier hs-var">encodeLargeNegInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272517"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272516"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679272516"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bisectSize"><span class="hs-identifier hs-var">bisectSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">negate</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272517"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272515"><span class="annot"><span class="annottext">maxv :: Integer
</span><a href="#local-6989586621679272515"><span class="hs-identifier hs-var hs-var">maxv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array Int Integer
</span><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-var">sizeLimits</span></a></span><span> </span><span class="annot"><span class="annottext">Array Int Integer -&gt; Int -&gt; Integer
forall (a :: * -&gt; * -&gt; *) e i.
(IArray a e, Ix i) =&gt;
a i e -&gt; i -&gt; e
</span><span class="hs-operator hs-var">A.!</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272516"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-222"></span><span>      </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#zeroCode"><span class="hs-identifier hs-var">zeroCode</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272516"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>      </span><span class="annot"><span class="annottext">ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putByteString"><span class="hs-identifier hs-var">putByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; PutTuple ()) -&gt; ByteString -&gt; PutTuple ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Integer -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#truncatedInt"><span class="hs-identifier hs-var">truncatedInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272516"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272515"><span class="hs-identifier hs-var">maxv</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272517"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- | given an IEEE 754 float/double, adjust it for encoding.</span><span>
</span><span id="line-226"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#floatAdjust"><span class="hs-identifier hs-type">floatAdjust</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-227"></span><span id="floatAdjust"><span class="annot"><span class="annottext">floatAdjust :: Bool -&gt; ByteString -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#floatAdjust"><span class="hs-identifier hs-var hs-var">floatAdjust</span></a></span></span><span> </span><span id="local-6989586621679272513"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679272513"><span class="hs-identifier hs-var">isEncode</span></a></span></span><span> </span><span id="local-6989586621679272512"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272512"><span class="hs-identifier hs-var">bs</span></a></span></span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679272513"><span class="hs-identifier hs-var">isEncode</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Word8
</span><span class="hs-identifier hs-var">BS.head</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272512"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x80</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Word8) -&gt; ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">xor</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272512"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679272513"><span class="hs-identifier hs-var">isEncode</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Word8
</span><span class="hs-identifier hs-var">BS.head</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272512"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x80</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x80</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Word8) -&gt; ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">xor</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272512"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.cons</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Word8
</span><span class="hs-identifier hs-var">BS.head</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272512"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`xor`</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x80</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.tail</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272512"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-type">encodeElem</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-comment">-- | Whether we are inside a nested tuple</span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-comment">-- | elem to encode</span><span>
</span><span id="line-236"></span><span>  </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-237"></span><span>  </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#PutTuple"><span class="hs-identifier hs-type">PutTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span id="encodeElem"><span class="annot"><span class="annottext">encodeElem :: Bool -&gt; Elem -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var hs-var">encodeElem</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#None"><span class="hs-identifier hs-var">None</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-239"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#nullCode"><span class="hs-identifier hs-var">nullCode</span></a></span><span> </span><span class="annot"><span class="annottext">PutTuple () -&gt; PutTuple () -&gt; PutTuple ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span>
</span><span id="line-240"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#None"><span class="hs-identifier hs-var">None</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#nullCode"><span class="hs-identifier hs-var">nullCode</span></a></span><span>
</span><span id="line-242"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Bytes"><span class="hs-identifier hs-type">Bytes</span></a></span><span> </span><span id="local-6989586621679272502"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272502"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bytesCode"><span class="hs-identifier hs-var">bytesCode</span></a></span><span> </span><span class="annot"><span class="annottext">PutTuple () -&gt; PutTuple () -&gt; PutTuple ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeBytes"><span class="hs-identifier hs-var">encodeBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272502"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-244"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span id="local-6989586621679272501"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679272501"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#stringCode"><span class="hs-identifier hs-var">stringCode</span></a></span><span> </span><span class="annot"><span class="annottext">PutTuple () -&gt; PutTuple () -&gt; PutTuple ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeBytes"><span class="hs-identifier hs-var">encodeBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679272501"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#zeroCode"><span class="hs-identifier hs-var">zeroCode</span></a></span><span>
</span><span id="line-247"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span id="local-6989586621679272500"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272500"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272500"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodePosInt"><span class="hs-identifier hs-var">encodePosInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272500"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeNegInt"><span class="hs-identifier hs-var">encodeNegInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272500"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-248"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Float"><span class="hs-identifier hs-type">Float</span></a></span><span> </span><span id="local-6989586621679272499"><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679272499"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#floatCode"><span class="hs-identifier hs-var">floatCode</span></a></span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><span class="annottext">ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putByteString"><span class="hs-identifier hs-var">putByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; PutTuple ()) -&gt; ByteString -&gt; PutTuple ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ByteString -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#floatAdjust"><span class="hs-identifier hs-var">floatAdjust</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PutM () -&gt; ByteString
</span><span class="hs-identifier hs-var">Put.runPut</span></span><span> </span><span class="annot"><span class="annottext">(PutM () -&gt; ByteString) -&gt; PutM () -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Float -&gt; PutM ()
</span><span class="hs-identifier hs-var">Put.putFloat32be</span></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679272499"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-251"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Double"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span id="local-6989586621679272497"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679272497"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#doubleCode"><span class="hs-identifier hs-var">doubleCode</span></a></span><span>
</span><span id="line-253"></span><span>  </span><span class="annot"><span class="annottext">ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putByteString"><span class="hs-identifier hs-var">putByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; PutTuple ()) -&gt; ByteString -&gt; PutTuple ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ByteString -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#floatAdjust"><span class="hs-identifier hs-var">floatAdjust</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PutM () -&gt; ByteString
</span><span class="hs-identifier hs-var">Put.runPut</span></span><span> </span><span class="annot"><span class="annottext">(PutM () -&gt; ByteString) -&gt; PutM () -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; PutM ()
</span><span class="hs-identifier hs-var">Put.putFloat64be</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679272497"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-254"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#trueCode"><span class="hs-identifier hs-var">trueCode</span></a></span><span>
</span><span id="line-255"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#falseCode"><span class="hs-identifier hs-var">falseCode</span></a></span><span>
</span><span id="line-256"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#UUID"><span class="hs-identifier hs-type">UUID</span></a></span><span> </span><span id="local-6989586621679272495"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272495"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621679272494"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272494"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679272493"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272493"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621679272492"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272492"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-257"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#uuidCode"><span class="hs-identifier hs-var">uuidCode</span></a></span><span>
</span><span id="line-258"></span><span>  </span><span class="annot"><span class="annottext">Word32 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord32be"><span class="hs-identifier hs-var">putWord32be</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272495"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><span class="annottext">Word32 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord32be"><span class="hs-identifier hs-var">putWord32be</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272494"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><span class="annottext">Word32 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord32be"><span class="hs-identifier hs-var">putWord32be</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272493"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-261"></span><span>  </span><span class="annot"><span class="annottext">Word32 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord32be"><span class="hs-identifier hs-var">putWord32be</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679272492"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-262"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Tuple"><span class="hs-identifier hs-type">Tuple</span></a></span><span> </span><span id="local-6989586621679272491"><span class="annot"><span class="annottext">[Elem]
</span><a href="#local-6989586621679272491"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-263"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#nestedCode"><span class="hs-identifier hs-var">nestedCode</span></a></span><span>
</span><span id="line-264"></span><span>  </span><span class="annot"><span class="annottext">(Elem -&gt; PutTuple ()) -&gt; [Elem] -&gt; PutTuple ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Elem -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elem]
</span><a href="#local-6989586621679272491"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-265"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span>
</span><span id="line-266"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#CompleteVS"><span class="hs-identifier hs-type">CompleteVS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Versionstamp.Internal.html#CompleteVersionstamp"><span class="hs-identifier hs-type">CompleteVersionstamp</span></a></span><span> </span><span id="local-6989586621679272489"><span class="annot"><span class="annottext">TransactionVersionstamp
</span><a href="#local-6989586621679272489"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621679272488"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272488"><span class="hs-identifier hs-var">uv</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-267"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Versionstamp.Internal.html#TransactionVersionstamp"><span class="hs-identifier hs-type">TransactionVersionstamp</span></a></span><span> </span><span id="local-6989586621679272486"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272486"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621679272485"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272485"><span class="hs-identifier hs-var">tb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TransactionVersionstamp
</span><a href="#local-6989586621679272489"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-268"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#versionstampCode"><span class="hs-identifier hs-var">versionstampCode</span></a></span><span>
</span><span id="line-269"></span><span>  </span><span class="annot"><span class="annottext">Word64 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord64be"><span class="hs-identifier hs-var">putWord64be</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272486"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-270"></span><span>  </span><span class="annot"><span class="annottext">Word16 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord16be"><span class="hs-identifier hs-var">putWord16be</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272485"><span class="hs-identifier hs-var">tb</span></a></span><span>
</span><span id="line-271"></span><span>  </span><span class="annot"><span class="annottext">Word16 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord16be"><span class="hs-identifier hs-var">putWord16be</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272488"><span class="hs-identifier hs-var">uv</span></a></span><span>
</span><span id="line-272"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#IncompleteVS"><span class="hs-identifier hs-type">IncompleteVS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FoundationDB.Versionstamp.Internal.html#IncompleteVersionstamp"><span class="hs-identifier hs-type">IncompleteVersionstamp</span></a></span><span> </span><span id="local-6989586621679272483"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272483"><span class="hs-identifier hs-var">uv</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-273"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord8"><span class="hs-identifier hs-var">putWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#versionstampCode"><span class="hs-identifier hs-var">versionstampCode</span></a></span><span>
</span><span id="line-274"></span><span>  </span><span id="local-6989586621679272482"><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272482"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PutTuple SerializationState
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-275"></span><span>  </span><span class="annot"><span class="annottext">SerializationState -&gt; PutTuple ()
forall s (m :: * -&gt; *). MonadState s m =&gt; s -&gt; m ()
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272482"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">incompleteVersionstampPos :: Maybe Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#incompleteVersionstampPos"><span class="hs-identifier hs-var">incompleteVersionstampPos</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe Int) -&gt; Int -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SerializationState -&gt; Int
</span><a href="FoundationDB.Layer.Tuple.Internal.html#currLength"><span class="hs-identifier hs-var hs-var">currLength</span></a></span><span> </span><span class="annot"><span class="annottext">SerializationState
</span><a href="#local-6989586621679272482"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><span class="annottext">Word64 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord64be"><span class="hs-identifier hs-var">putWord64be</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span>
</span><span id="line-277"></span><span>  </span><span class="annot"><span class="annottext">Word16 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord16be"><span class="hs-identifier hs-var">putWord16be</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span>
</span><span id="line-278"></span><span>  </span><span class="annot"><span class="annottext">Word16 -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putWord16be"><span class="hs-identifier hs-var">putWord16be</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272483"><span class="hs-identifier hs-var">uv</span></a></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-comment">-- | Encodes a tuple from a list of tuple elements. Returns the encoded</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- tuple.</span><span>
</span><span id="line-282"></span><span class="hs-comment">--</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- Warning: this function can throw an 'Error' with 'TupleIntTooLarge' if you</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- pass an Int element that requires more than 255 bytes to serialize. Since</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- the smallest such number is 614 decimal digits long, we deemed this situation</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- unlikely enough that it wasn't worth returning a sum type from this function.</span><span>
</span><span id="line-287"></span><span class="hs-comment">--</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- Note: this encodes to the format expected by FoundationDB as input, which</span><span>
</span><span id="line-289"></span><span class="hs-comment">-- is slightly different from the format returned by FoundationDB as output. The</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- difference is that if the encoded bytes include an incomplete version stamp,</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- four bytes are appended to the end to indicate the index of the incomplete</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- version stamp so that FoundationDB can fill in the transaction version and</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- batch order when this function is used in conjunction with</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- 'setVersionstampedKey' and 'setVersionstampedValue':</span><span>
</span><span id="line-295"></span><span class="hs-comment">--</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-297"></span><span class="hs-comment">-- do let k = pack mySubspace [IncompleteVS (IncompleteVersionstamp 123)]</span><span>
</span><span id="line-298"></span><span class="hs-comment">--    atomicOp k (setVersionstampedKey &quot;my_value&quot;)</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-300"></span><span class="hs-comment">--</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- Because FoundationDB uses two bytes at the end of the key for this, only</span><span>
</span><span id="line-302"></span><span class="hs-comment">-- one 'IncompleteVS' can be used per key.</span><span>
</span><span id="line-303"></span><span class="hs-comment">--</span><span>
</span><span id="line-304"></span><span class="hs-comment">-- This also means that @(decodeTupleElems . encodeTupleElems)@ gives</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- strange results when an 'IncompleteVS' is present in the input, because the</span><span>
</span><span id="line-306"></span><span class="hs-comment">-- two extra bytes are interpreted as being part of the tuple.</span><span>
</span><span id="line-307"></span><span class="hs-comment">--</span><span>
</span><span id="line-308"></span><span class="hs-comment">-- &gt;&gt;&gt; decodeTupleElems $ encodeTupleElems [IncompleteVS (IncompleteVersionstamp 1)]</span><span>
</span><span id="line-309"></span><span class="hs-comment">-- Right [IncompleteVS (IncompleteVersionstamp 1),Bytes &quot;&quot;,None,None]</span><span>
</span><span id="line-310"></span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- For this reason, 'decodeTupleElems' should only be called on keys that have</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- been returned from the database, because 'setVersionstampedKey' drops</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- the last two bytes when it writes the key to the database.</span><span>
</span><span id="line-314"></span><span id="local-6989586621679272480"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeTupleElems"><span class="hs-identifier hs-type">encodeTupleElems</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621679272480"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679272480"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span></span><span>
</span><span id="line-315"></span><span id="encodeTupleElems"><span class="annot"><span class="annottext">encodeTupleElems :: t Elem -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeTupleElems"><span class="hs-identifier hs-var hs-var">encodeTupleElems</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ByteString, Maybe Int) -&gt; ByteString
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((ByteString, Maybe Int) -&gt; ByteString)
-&gt; (t Elem -&gt; (ByteString, Maybe Int)) -&gt; t Elem -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PutTuple () -&gt; (ByteString, Maybe Int)
</span><a href="FoundationDB.Layer.Tuple.Internal.html#runPutTuple"><span class="hs-identifier hs-var">runPutTuple</span></a></span><span> </span><span class="annot"><span class="annottext">(PutTuple () -&gt; (ByteString, Maybe Int))
-&gt; (t Elem -&gt; PutTuple ()) -&gt; t Elem -&gt; (ByteString, Maybe Int)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Elem -&gt; PutTuple ()) -&gt; t Elem -&gt; PutTuple ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Elem -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="hs-comment">-- | Like 'encodeTupleElems', but prepends a raw bytestring prefix to the</span><span>
</span><span id="line-318"></span><span class="hs-comment">-- tuple. This is used by the subspace and directory layers.</span><span>
</span><span id="line-319"></span><span id="local-6989586621679272477"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#encodeTupleElemsWPrefix"><span class="hs-identifier hs-type">encodeTupleElemsWPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621679272477"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679272477"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span></span><span>
</span><span id="line-320"></span><span id="encodeTupleElemsWPrefix"><span class="annot"><span class="annottext">encodeTupleElemsWPrefix :: ByteString -&gt; t Elem -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeTupleElemsWPrefix"><span class="hs-identifier hs-var hs-var">encodeTupleElemsWPrefix</span></a></span></span><span> </span><span id="local-6989586621679272475"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272475"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span id="local-6989586621679272474"><span class="annot"><span class="annottext">t Elem
</span><a href="#local-6989586621679272474"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-321"></span><span>  </span><span class="annot"><span class="annottext">(ByteString, Maybe Int) -&gt; ByteString
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((ByteString, Maybe Int) -&gt; ByteString)
-&gt; (ByteString, Maybe Int) -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-322"></span><span>    </span><span class="annot"><span class="annottext">PutTuple () -&gt; (ByteString, Maybe Int)
</span><a href="FoundationDB.Layer.Tuple.Internal.html#runPutTuple"><span class="hs-identifier hs-var">runPutTuple</span></a></span><span> </span><span class="annot"><span class="annottext">(PutTuple () -&gt; (ByteString, Maybe Int))
-&gt; PutTuple () -&gt; (ByteString, Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-323"></span><span>      </span><span class="annot"><span class="annottext">ByteString -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#putByteString"><span class="hs-identifier hs-var">putByteString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272475"><span class="hs-identifier hs-var">prefix</span></a></span><span>
</span><span id="line-324"></span><span>      </span><span class="annot"><span class="annottext">(Elem -&gt; PutTuple ()) -&gt; t Elem -&gt; PutTuple ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Elem -&gt; PutTuple ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#encodeElem"><span class="hs-identifier hs-var">encodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">t Elem
</span><a href="#local-6989586621679272474"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-comment">-- | Decodes a tuple, or returns a parse error. This function will never return</span><span>
</span><span id="line-327"></span><span class="hs-comment">-- 'IncompleteVS' tuple elements. See the note on 'encodeTupleElems' for more</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- information.</span><span>
</span><span id="line-329"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTupleElems"><span class="hs-identifier hs-type">decodeTupleElems</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-330"></span><span id="decodeTupleElems"><span class="annot"><span class="annottext">decodeTupleElems :: ByteString -&gt; Either String [Elem]
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTupleElems"><span class="hs-identifier hs-var hs-var">decodeTupleElems</span></a></span></span><span> </span><span id="local-6989586621679272472"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272472"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Get [Elem] -&gt; Either String [Elem]
forall a. ByteString -&gt; Get a -&gt; Either String a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#runGetComplete"><span class="hs-identifier hs-var">runGetComplete</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272472"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">(Get [Elem] -&gt; Either String [Elem])
-&gt; Get [Elem] -&gt; Either String [Elem]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Get Elem -&gt; Get [Elem]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f [a]
</span><span class="hs-identifier hs-var">many</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeElem"><span class="hs-identifier hs-var">decodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">-- | Decodes a tuple that was encoded with a given prefix. Fails if the</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- input prefix is not actually a prefix of the encoded tuple.</span><span>
</span><span id="line-334"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTupleElemsWPrefix"><span class="hs-identifier hs-type">decodeTupleElemsWPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-comment">-- | expected prefix</span><span>
</span><span id="line-336"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-comment">-- | encoded tuple</span><span>
</span><span id="line-338"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-339"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-340"></span><span id="decodeTupleElemsWPrefix"><span class="annot"><span class="annottext">decodeTupleElemsWPrefix :: ByteString -&gt; ByteString -&gt; Either String [Elem]
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTupleElemsWPrefix"><span class="hs-identifier hs-var hs-var">decodeTupleElemsWPrefix</span></a></span></span><span> </span><span id="local-6989586621679272467"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272467"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span id="local-6989586621679272466"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272466"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Get [Elem] -&gt; Either String [Elem]
forall a. ByteString -&gt; Get a -&gt; Either String a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#runGetComplete"><span class="hs-identifier hs-var">runGetComplete</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272466"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">(Get [Elem] -&gt; Either String [Elem])
-&gt; Get [Elem] -&gt; Either String [Elem]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-341"></span><span>  </span><span id="local-6989586621679272465"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272465"><span class="hs-identifier hs-var">gotPrefix</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Get ByteString
</span><span class="hs-identifier hs-var">getByteString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272467"><span class="hs-identifier hs-var">prefix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Get ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272465"><span class="hs-identifier hs-var">gotPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272467"><span class="hs-identifier hs-var">prefix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>  </span><span class="annot"><span class="annottext">Get Elem -&gt; Get [Elem]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f [a]
</span><span class="hs-identifier hs-var">many</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeElem"><span class="hs-identifier hs-var">decodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span id="local-6989586621679272763"><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#runGetComplete"><span class="hs-identifier hs-type">runGetComplete</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="#local-6989586621679272763"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679272763"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-346"></span><span id="runGetComplete"><span class="annot"><span class="annottext">runGetComplete :: ByteString -&gt; Get a -&gt; Either String a
</span><a href="FoundationDB.Layer.Tuple.Internal.html#runGetComplete"><span class="hs-identifier hs-var hs-var">runGetComplete</span></a></span></span><span> </span><span id="local-6989586621679272464"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272464"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621679272463"><span class="annot"><span class="annottext">Get a
</span><a href="#local-6989586621679272463"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679272462"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679272462"><span class="hs-identifier hs-var">result</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679272461"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272461"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get a -&gt; ByteString -&gt; Int -&gt; Either String (a, ByteString)
forall a.
Get a -&gt; ByteString -&gt; Int -&gt; Either String (a, ByteString)
</span><span class="hs-identifier hs-var">runGetState</span></span><span> </span><span class="annot"><span class="annottext">Get a
</span><a href="#local-6989586621679272463"><span class="hs-identifier hs-var">decoder</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272464"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-348"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Either String () -&gt; Either String ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Bool
</span><span class="hs-identifier hs-var">BS.null</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272461"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either String () -&gt; Either String ())
-&gt; Either String () -&gt; Either String ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-349"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Either String ()
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String ()) -&gt; String -&gt; Either String ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;could not decode &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">BS.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272461"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; bytes from the end of the bytestring&quot;</span></span><span>
</span><span id="line-350"></span><span>  </span><span class="annot"><span class="annottext">a -&gt; Either String a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679272462"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeElem"><span class="hs-identifier hs-type">decodeElem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-353"></span><span id="decodeElem"><span class="annot"><span class="annottext">decodeElem :: Bool -&gt; Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeElem"><span class="hs-identifier hs-var hs-var">decodeElem</span></a></span></span><span> </span><span id="local-6989586621679272457"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679272457"><span class="hs-identifier hs-var">nested</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-354"></span><span>  </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span> </span><span class="annot"><span class="annottext">Get Word8 -&gt; (Word8 -&gt; Get Elem) -&gt; Get Elem
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-355"></span><span>    </span><span id="local-6989586621679272456"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span></span><span>
</span><span id="line-356"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#nullCode"><span class="hs-identifier hs-var">nullCode</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679272457"><span class="hs-identifier hs-var">nested</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Get ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#expectCode"><span class="hs-identifier hs-var">expectCode</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span> </span><span class="annot"><span class="annottext">Get () -&gt; Get Elem -&gt; Get Elem
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#None"><span class="hs-identifier hs-var">None</span></a></span><span>
</span><span id="line-357"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#nullCode"><span class="hs-identifier hs-var">nullCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#None"><span class="hs-identifier hs-var">None</span></a></span><span>
</span><span id="line-358"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bytesCode"><span class="hs-identifier hs-var">bytesCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeBytesElem"><span class="hs-identifier hs-var">decodeBytesElem</span></a></span><span>
</span><span id="line-359"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#stringCode"><span class="hs-identifier hs-var">stringCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTextElem"><span class="hs-identifier hs-var">decodeTextElem</span></a></span><span>
</span><span id="line-360"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#zeroCode"><span class="hs-identifier hs-var">zeroCode</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#posEndCode"><span class="hs-identifier hs-var">posEndCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeSmallPosInt"><span class="hs-identifier hs-var">decodeSmallPosInt</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-361"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#negStartCode"><span class="hs-identifier hs-var">negStartCode</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#zeroCode"><span class="hs-identifier hs-var">zeroCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeSmallNegInt"><span class="hs-identifier hs-var">decodeSmallNegInt</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-362"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#posEndCode"><span class="hs-identifier hs-var">posEndCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeLargePosInt"><span class="hs-identifier hs-var">decodeLargePosInt</span></a></span><span>
</span><span id="line-363"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#negStartCode"><span class="hs-identifier hs-var">negStartCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeLargeNegInt"><span class="hs-identifier hs-var">decodeLargeNegInt</span></a></span><span>
</span><span id="line-364"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#floatCode"><span class="hs-identifier hs-var">floatCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeFloatElem"><span class="hs-identifier hs-var">decodeFloatElem</span></a></span><span>
</span><span id="line-365"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#doubleCode"><span class="hs-identifier hs-var">doubleCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeDoubleElem"><span class="hs-identifier hs-var">decodeDoubleElem</span></a></span><span>
</span><span id="line-366"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#trueCode"><span class="hs-identifier hs-var">trueCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#falseCode"><span class="hs-identifier hs-var">falseCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#uuidCode"><span class="hs-identifier hs-var">uuidCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeUUIDElem"><span class="hs-identifier hs-var">decodeUUIDElem</span></a></span><span>
</span><span id="line-369"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#nestedCode"><span class="hs-identifier hs-var">nestedCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTupleElem"><span class="hs-identifier hs-var">decodeTupleElem</span></a></span><span>
</span><span id="line-370"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="FoundationDB.Layer.Tuple.Internal.html#versionstampCode"><span class="hs-identifier hs-var">versionstampCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeVersionstamp"><span class="hs-identifier hs-var">decodeVersionstamp</span></a></span><span>
</span><span id="line-371"></span><span>    </span><span id="local-6989586621679272443"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272443"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Get Elem
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Get Elem) -&gt; String -&gt; Get Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;got unknown tuple code: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272443"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#expectCode"><span class="hs-identifier hs-type">expectCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span id="expectCode"><span class="annot"><span class="annottext">expectCode :: Word8 -&gt; Get ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#expectCode"><span class="hs-identifier hs-var hs-var">expectCode</span></a></span></span><span> </span><span id="local-6989586621679272442"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272442"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-375"></span><span>  </span><span id="local-6989586621679272441"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272441"><span class="hs-identifier hs-var">c'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-376"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Get ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272442"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272441"><span class="hs-identifier hs-var">c'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#bytesTerminator"><span class="hs-identifier hs-type">bytesTerminator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span id="bytesTerminator"><span class="annot"><span class="annottext">bytesTerminator :: Get ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bytesTerminator"><span class="hs-identifier hs-var hs-var">bytesTerminator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-keyword">do</span><span>
</span><span id="line-381"></span><span>    </span><span id="local-6989586621679272439"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272439"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Int
</span><span class="hs-identifier hs-var">remaining</span></span><span>
</span><span id="line-382"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Get ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272439"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>    </span><span class="annot"><span class="annottext">Get () -&gt; Get () -&gt; Get ()
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-384"></span><span>      </span><span id="local-6989586621679272437"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272437"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-385"></span><span>      </span><span id="local-6989586621679272436"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272436"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Int
</span><span class="hs-identifier hs-var">remaining</span></span><span>
</span><span id="line-386"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Get ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272437"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272436"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><span class="annottext">Get () -&gt; Get () -&gt; Get ()
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-388"></span><span>      </span><span id="local-6989586621679272435"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272435"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-389"></span><span>      </span><span id="local-6989586621679272434"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272434"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word8 -&gt; Get Word8
forall a. Get a -&gt; Get a
</span><span class="hs-identifier hs-var">lookAhead</span></span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-390"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Get ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272435"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272434"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="hs-comment">-- | Reads all bytes up to (but not including) the terminator byte</span><span>
</span><span id="line-393"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#getBytesUntilTerminator"><span class="hs-identifier hs-type">getBytesUntilTerminator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-394"></span><span id="getBytesUntilTerminator"><span class="annot"><span class="annottext">getBytesUntilTerminator :: Get ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#getBytesUntilTerminator"><span class="hs-identifier hs-var hs-var">getBytesUntilTerminator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Word8] -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.pack</span></span><span> </span><span class="annot"><span class="annottext">([Word8] -&gt; ByteString) -&gt; Get [Word8] -&gt; Get ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word8 -&gt; Get [Word8]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f [a]
</span><span class="hs-identifier hs-var">many</span></span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><a href="#local-6989586621679272430"><span class="hs-identifier hs-var">nonTerminator</span></a></span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>    </span><span id="local-6989586621679272430"><span class="annot"><span class="annottext">nonTerminator :: Get Word8
</span><a href="#local-6989586621679272430"><span class="hs-identifier hs-var hs-var">nonTerminator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-397"></span><span>      </span><span id="local-6989586621679272429"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272429"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-398"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272429"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-399"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-400"></span><span>          </span><span id="local-6989586621679272428"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272428"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-401"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Get ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272428"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>          </span><span class="annot"><span class="annottext">Word8 -&gt; Get Word8
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-403"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-404"></span><span>          </span><span class="annot"><span class="annottext">Word8 -&gt; Get Word8
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272429"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeBytesElem"><span class="hs-identifier hs-type">decodeBytesElem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-407"></span><span id="decodeBytesElem"><span class="annot"><span class="annottext">decodeBytesElem :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeBytesElem"><span class="hs-identifier hs-var hs-var">decodeBytesElem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-408"></span><span>  </span><span class="annot"><span class="annottext">ByteString -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Bytes"><span class="hs-identifier hs-var">Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Elem) -&gt; Get ByteString -&gt; Get Elem
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Get ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#getBytesUntilTerminator"><span class="hs-identifier hs-var">getBytesUntilTerminator</span></a></span><span> </span><span class="annot"><span class="annottext">Get ByteString -&gt; Get () -&gt; Get ByteString
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;*</span></span><span> </span><span class="annot"><span class="annottext">Get ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bytesTerminator"><span class="hs-identifier hs-var">bytesTerminator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTextElem"><span class="hs-identifier hs-type">decodeTextElem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-411"></span><span id="decodeTextElem"><span class="annot"><span class="annottext">decodeTextElem :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTextElem"><span class="hs-identifier hs-var hs-var">decodeTextElem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-412"></span><span>  </span><span class="annot"><span class="annottext">Text -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Text"><span class="hs-identifier hs-var">Text</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Elem) -&gt; (ByteString -&gt; Text) -&gt; ByteString -&gt; Elem
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Elem) -&gt; Get ByteString -&gt; Get Elem
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Get ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#getBytesUntilTerminator"><span class="hs-identifier hs-var">getBytesUntilTerminator</span></a></span><span> </span><span class="annot"><span class="annottext">Get ByteString -&gt; Get () -&gt; Get ByteString
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;*</span></span><span> </span><span class="annot"><span class="annottext">Get ()
</span><a href="FoundationDB.Layer.Tuple.Internal.html#bytesTerminator"><span class="hs-identifier hs-var">bytesTerminator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeSmallPosInt"><span class="hs-identifier hs-type">decodeSmallPosInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-415"></span><span id="decodeSmallPosInt"><span class="annot"><span class="annottext">decodeSmallPosInt :: Word8 -&gt; Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeSmallPosInt"><span class="hs-identifier hs-var hs-var">decodeSmallPosInt</span></a></span></span><span> </span><span id="local-6989586621679272426"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272426"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-416"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272425"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679272425"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Int) -&gt; Word8 -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272426"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">20</span></span><span>
</span><span id="line-417"></span><span>  </span><span id="local-6989586621679272424"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272424"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Word8] -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word8 -&gt; [Word8]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272425"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; ByteString
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; Get ByteString -&gt; Get ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Get ByteString
</span><span class="hs-identifier hs-var">getBytes</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272425"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-418"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272422"><span class="annot"><span class="annottext">subres :: Either String Word64
</span><a href="#local-6989586621679272422"><span class="hs-identifier hs-var hs-var">subres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Get Word64 -&gt; ByteString -&gt; Either String Word64
forall a. Get a -&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">runGet</span></span><span> </span><span class="annot"><span class="annottext">Get Word64
</span><span class="hs-identifier hs-var">getWord64be</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272424"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-419"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either String Word64
</span><a href="#local-6989586621679272422"><span class="hs-identifier hs-var">subres</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-420"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679272421"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679272421"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Get Elem
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679272421"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-421"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679272420"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272420"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Elem -&gt; Get Elem) -&gt; Elem -&gt; Get Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Int"><span class="hs-identifier hs-var">Int</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Elem) -&gt; Integer -&gt; Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272420"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeSmallNegInt"><span class="hs-identifier hs-type">decodeSmallNegInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-424"></span><span id="decodeSmallNegInt"><span class="annot"><span class="annottext">decodeSmallNegInt :: Word8 -&gt; Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeSmallNegInt"><span class="hs-identifier hs-var hs-var">decodeSmallNegInt</span></a></span></span><span> </span><span id="local-6989586621679272419"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272419"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-425"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272418"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679272418"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Int) -&gt; Word8 -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272419"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-426"></span><span>  </span><span id="local-6989586621679272417"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272417"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Word8] -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word8 -&gt; [Word8]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272418"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; ByteString
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; Get ByteString -&gt; Get ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Get ByteString
</span><span class="hs-identifier hs-var">getBytes</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272418"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272416"><span class="annot"><span class="annottext">subres :: Either String Word64
</span><a href="#local-6989586621679272416"><span class="hs-identifier hs-var hs-var">subres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Get Word64 -&gt; ByteString -&gt; Either String Word64
forall a. Get a -&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">runGet</span></span><span> </span><span class="annot"><span class="annottext">Get Word64
</span><span class="hs-identifier hs-var">getWord64be</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272417"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-428"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either String Word64
</span><a href="#local-6989586621679272416"><span class="hs-identifier hs-var">subres</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-429"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679272415"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679272415"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Get Elem
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679272415"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-430"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679272414"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272414"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Elem -&gt; Get Elem) -&gt; Elem -&gt; Get Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Int"><span class="hs-identifier hs-var">Int</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Elem) -&gt; Integer -&gt; Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272414"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Array Int Integer
</span><a href="FoundationDB.Layer.Tuple.Internal.html#sizeLimits"><span class="hs-identifier hs-var">sizeLimits</span></a></span><span> </span><span class="annot"><span class="annottext">Array Int Integer -&gt; Int -&gt; Integer
forall (a :: * -&gt; * -&gt; *) e i.
(IArray a e, Ix i) =&gt;
a i e -&gt; i -&gt; e
</span><span class="hs-operator hs-var">A.!</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272418"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeLargeNegInt"><span class="hs-identifier hs-type">decodeLargeNegInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-433"></span><span id="decodeLargeNegInt"><span class="annot"><span class="annottext">decodeLargeNegInt :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeLargeNegInt"><span class="hs-identifier hs-var hs-var">decodeLargeNegInt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-434"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679272413"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272413"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Int) -&gt; (Word8 -&gt; Word8) -&gt; Word8 -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">xor</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Int) -&gt; Get Word8 -&gt; Get Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-435"></span><span>  </span><span id="local-6989586621679272412"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272412"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Integer -&gt; Get Integer
forall t t. (Num t, Num t, Bits t, Eq t) =&gt; t -&gt; t -&gt; t -&gt; Get t
</span><a href="#local-6989586621679272411"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272413"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-436"></span><span>  </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Elem -&gt; Get Elem) -&gt; Elem -&gt; Get Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Int"><span class="hs-identifier hs-var">Int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272412"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`shiftL`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272413"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-438"></span><span>    </span><span id="local-6989586621679272411"><span class="annot"><span class="annottext">go :: t -&gt; t -&gt; t -&gt; Get t
</span><a href="#local-6989586621679272411"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679272410"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272410"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679272409"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272409"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679272408"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272408"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-439"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272410"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; t -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272409"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Get t
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272408"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-440"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-441"></span><span>        </span><span id="local-6989586621679272407"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272407"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; t
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; t) -&gt; Get Word8 -&gt; Get t
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-442"></span><span>        </span><span class="annot"><span class="annottext">t -&gt; t -&gt; t -&gt; Get t
</span><a href="#local-6989586621679272411"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272410"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; t -&gt; t
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272409"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272407"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; t -&gt; t
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272408"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Int -&gt; t
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`shiftL`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeLargePosInt"><span class="hs-identifier hs-type">decodeLargePosInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-445"></span><span id="decodeLargePosInt"><span class="annot"><span class="annottext">decodeLargePosInt :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeLargePosInt"><span class="hs-identifier hs-var hs-var">decodeLargePosInt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-446"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679272406"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272406"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Int) -&gt; Get Word8 -&gt; Get Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-447"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Integer -&gt; Get Elem
forall t. (Eq t, Num t) =&gt; t -&gt; t -&gt; Integer -&gt; Get Elem
</span><a href="#local-6989586621679272405"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679272406"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-449"></span><span>    </span><span id="local-6989586621679272405"><span class="annot"><span class="annottext">go :: t -&gt; t -&gt; Integer -&gt; Get Elem
</span><a href="#local-6989586621679272405"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679272404"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272404"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679272403"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272403"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679272402"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272402"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-450"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272404"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; t -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272403"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Elem -&gt; Get Elem) -&gt; Elem -&gt; Get Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Int"><span class="hs-identifier hs-var">Int</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272402"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-451"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-452"></span><span>        </span><span id="local-6989586621679272401"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272401"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Integer) -&gt; Get Word8 -&gt; Get Integer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-453"></span><span>        </span><span class="annot"><span class="annottext">t -&gt; t -&gt; Integer -&gt; Get Elem
</span><a href="#local-6989586621679272405"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272404"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; t -&gt; t
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679272403"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272401"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679272402"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`shiftL`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeFloatElem"><span class="hs-identifier hs-type">decodeFloatElem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-456"></span><span id="decodeFloatElem"><span class="annot"><span class="annottext">decodeFloatElem :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeFloatElem"><span class="hs-identifier hs-var hs-var">decodeFloatElem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-457"></span><span>  </span><span id="local-6989586621679272400"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272400"><span class="hs-identifier hs-var">fBytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ByteString -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#floatAdjust"><span class="hs-identifier hs-var">floatAdjust</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; Get ByteString -&gt; Get ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Get ByteString
</span><span class="hs-identifier hs-var">getByteString</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272399"><span class="annot"><span class="annottext">subres :: Either String Float
</span><a href="#local-6989586621679272399"><span class="hs-identifier hs-var hs-var">subres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Get Float -&gt; ByteString -&gt; Either String Float
forall a. Get a -&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">runGet</span></span><span> </span><span class="annot"><span class="annottext">Get Float
</span><span class="hs-identifier hs-var">getFloat32be</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272400"><span class="hs-identifier hs-var">fBytes</span></a></span><span>
</span><span id="line-459"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either String Float
</span><a href="#local-6989586621679272399"><span class="hs-identifier hs-var">subres</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-460"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679272398"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679272398"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Get Elem
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679272398"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-461"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679272397"><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679272397"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Elem -&gt; Get Elem) -&gt; Elem -&gt; Get Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Float -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Float"><span class="hs-identifier hs-var">Float</span></a></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679272397"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeDoubleElem"><span class="hs-identifier hs-type">decodeDoubleElem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-464"></span><span id="decodeDoubleElem"><span class="annot"><span class="annottext">decodeDoubleElem :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeDoubleElem"><span class="hs-identifier hs-var hs-var">decodeDoubleElem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-465"></span><span>  </span><span id="local-6989586621679272396"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272396"><span class="hs-identifier hs-var">fBytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ByteString -&gt; ByteString
</span><a href="FoundationDB.Layer.Tuple.Internal.html#floatAdjust"><span class="hs-identifier hs-var">floatAdjust</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; Get ByteString -&gt; Get ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Get ByteString
</span><span class="hs-identifier hs-var">getByteString</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272395"><span class="annot"><span class="annottext">subres :: Either String Double
</span><a href="#local-6989586621679272395"><span class="hs-identifier hs-var hs-var">subres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Get Double -&gt; ByteString -&gt; Either String Double
forall a. Get a -&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">runGet</span></span><span> </span><span class="annot"><span class="annottext">Get Double
</span><span class="hs-identifier hs-var">getFloat64be</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679272396"><span class="hs-identifier hs-var">fBytes</span></a></span><span>
</span><span id="line-467"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either String Double
</span><a href="#local-6989586621679272395"><span class="hs-identifier hs-var">subres</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-468"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679272394"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679272394"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Get Elem
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679272394"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-469"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679272393"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679272393"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Elem -&gt; Get Elem) -&gt; Elem -&gt; Get Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Double"><span class="hs-identifier hs-var">Double</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679272393"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeUUIDElem"><span class="hs-identifier hs-type">decodeUUIDElem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-472"></span><span id="decodeUUIDElem"><span class="annot"><span class="annottext">decodeUUIDElem :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeUUIDElem"><span class="hs-identifier hs-var hs-var">decodeUUIDElem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-473"></span><span>  </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32 -&gt; Word32 -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#UUID"><span class="hs-identifier hs-var">UUID</span></a></span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; Word32 -&gt; Word32 -&gt; Word32 -&gt; Elem)
-&gt; Get Word32 -&gt; Get (Word32 -&gt; Word32 -&gt; Word32 -&gt; Elem)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word32
</span><span class="hs-identifier hs-var">getWord32be</span></span><span>
</span><span id="line-474"></span><span>    </span><span class="annot"><span class="annottext">Get (Word32 -&gt; Word32 -&gt; Word32 -&gt; Elem)
-&gt; Get Word32 -&gt; Get (Word32 -&gt; Word32 -&gt; Elem)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word32
</span><span class="hs-identifier hs-var">getWord32be</span></span><span>
</span><span id="line-475"></span><span>    </span><span class="annot"><span class="annottext">Get (Word32 -&gt; Word32 -&gt; Elem)
-&gt; Get Word32 -&gt; Get (Word32 -&gt; Elem)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word32
</span><span class="hs-identifier hs-var">getWord32be</span></span><span>
</span><span id="line-476"></span><span>    </span><span class="annot"><span class="annottext">Get (Word32 -&gt; Elem) -&gt; Get Word32 -&gt; Get Elem
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word32
</span><span class="hs-identifier hs-var">getWord32be</span></span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTupleElem"><span class="hs-identifier hs-type">decodeTupleElem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-479"></span><span id="decodeTupleElem"><span class="annot"><span class="annottext">decodeTupleElem :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeTupleElem"><span class="hs-identifier hs-var hs-var">decodeTupleElem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-480"></span><span>  </span><span id="local-6989586621679272392"><span class="annot"><span class="annottext">[Elem]
</span><a href="#local-6989586621679272392"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get [Elem]
</span><a href="#local-6989586621679272391"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-481"></span><span>  </span><span id="local-6989586621679272390"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272390"><span class="hs-identifier hs-var">terminator</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-482"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Get ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272390"><span class="hs-identifier hs-var">terminator</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>  </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Elem] -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#Tuple"><span class="hs-identifier hs-var">Tuple</span></a></span><span> </span><span class="annot"><span class="annottext">[Elem]
</span><a href="#local-6989586621679272392"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-485"></span><span>    </span><span id="local-6989586621679272391"><span class="annot"><span class="annottext">loop :: Get [Elem]
</span><a href="#local-6989586621679272391"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-486"></span><span>      </span><span id="local-6989586621679272389"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679272389"><span class="hs-identifier hs-var">isEnd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Bool
</span><a href="#local-6989586621679272388"><span class="hs-identifier hs-var">checkEnd</span></a></span><span>
</span><span id="line-487"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679272389"><span class="hs-identifier hs-var">isEnd</span></a></span><span>
</span><span id="line-488"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Elem] -&gt; Get [Elem]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-489"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-490"></span><span>          </span><span id="local-6989586621679272387"><span class="annot"><span class="annottext">Elem
</span><a href="#local-6989586621679272387"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeElem"><span class="hs-identifier hs-var">decodeElem</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-491"></span><span>          </span><span id="local-6989586621679272386"><span class="annot"><span class="annottext">[Elem]
</span><a href="#local-6989586621679272386"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get [Elem]
</span><a href="#local-6989586621679272391"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-492"></span><span>          </span><span class="annot"><span class="annottext">[Elem] -&gt; Get [Elem]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elem
</span><a href="#local-6989586621679272387"><span class="hs-identifier hs-var">next</span></a></span><span> </span><span class="annot"><span class="annottext">Elem -&gt; [Elem] -&gt; [Elem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Elem]
</span><a href="#local-6989586621679272386"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span>    </span><span class="annot"><a href="#local-6989586621679272388"><span class="hs-identifier hs-type">checkEnd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-495"></span><span>    </span><span id="local-6989586621679272388"><span class="annot"><span class="annottext">checkEnd :: Get Bool
</span><a href="#local-6989586621679272388"><span class="hs-identifier hs-var hs-var">checkEnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Get Bool -&gt; Get Bool
forall a. Get a -&gt; Get a
</span><span class="hs-identifier hs-var">lookAhead</span></span><span> </span><span class="annot"><span class="annottext">(Get Bool -&gt; Get Bool) -&gt; Get Bool -&gt; Get Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-496"></span><span>      </span><span id="local-6989586621679272385"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272385"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span>
</span><span id="line-497"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679272385"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span>
</span><span id="line-498"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xff</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Bool) -&gt; Get Word8 -&gt; Get Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get Word8
</span><span class="hs-identifier hs-var">getWord8</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Get Bool -&gt; Get Bool -&gt; Get Bool
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Get Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-499"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Get Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#decodeVersionstamp"><span class="hs-identifier hs-type">decodeVersionstamp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><a href="FoundationDB.Layer.Tuple.Internal.html#Elem"><span class="hs-identifier hs-type">Elem</span></a></span><span>
</span><span id="line-502"></span><span id="decodeVersionstamp"><span class="annot"><span class="annottext">decodeVersionstamp :: Get Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#decodeVersionstamp"><span class="hs-identifier hs-var hs-var">decodeVersionstamp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-503"></span><span>  </span><span id="local-6989586621679272384"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272384"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word64
</span><span class="hs-identifier hs-var">getWord64be</span></span><span>
</span><span id="line-504"></span><span>  </span><span id="local-6989586621679272383"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272383"><span class="hs-identifier hs-var">bo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word16
</span><span class="hs-identifier hs-var">getWord16be</span></span><span>
</span><span id="line-505"></span><span>  </span><span id="local-6989586621679272382"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272382"><span class="hs-identifier hs-var">uv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get Word16
</span><span class="hs-identifier hs-var">getWord16be</span></span><span>
</span><span id="line-506"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679272381"><span class="annot"><span class="annottext">tvs :: TransactionVersionstamp
</span><a href="#local-6989586621679272381"><span class="hs-identifier hs-var hs-var">tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word16 -&gt; TransactionVersionstamp
</span><a href="FoundationDB.Versionstamp.Internal.html#TransactionVersionstamp"><span class="hs-identifier hs-var">TransactionVersionstamp</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679272384"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272383"><span class="hs-identifier hs-var">bo</span></a></span><span>
</span><span id="line-507"></span><span>  </span><span class="annot"><span class="annottext">Elem -&gt; Get Elem
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Elem -&gt; Get Elem) -&gt; Elem -&gt; Get Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Versionstamp 'Complete -&gt; Elem
</span><a href="FoundationDB.Layer.Tuple.Internal.html#CompleteVS"><span class="hs-identifier hs-var">CompleteVS</span></a></span><span> </span><span class="annot"><span class="annottext">(Versionstamp 'Complete -&gt; Elem) -&gt; Versionstamp 'Complete -&gt; Elem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TransactionVersionstamp -&gt; Word16 -&gt; Versionstamp 'Complete
</span><a href="FoundationDB.Versionstamp.Internal.html#CompleteVersionstamp"><span class="hs-identifier hs-var">CompleteVersionstamp</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionVersionstamp
</span><a href="#local-6989586621679272381"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679272382"><span class="hs-identifier hs-var">uv</span></a></span><span>
</span><span id="line-508"></span></pre></body></html>